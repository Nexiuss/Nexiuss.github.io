<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog on Nexius</title>
    <link>https://nexiuss.github.io/tags/blog/</link>
    <description>Recent content in Blog on Nexius</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Mon, 29 Dec 2025 17:06:40 +0800</lastBuildDate>
    <atom:link href="https://nexiuss.github.io/tags/blog/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>AltStore使用说明(MacOS)</title>
      <link>https://nexiuss.github.io/posts/altstore%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8Emacos/</link>
      <pubDate>Mon, 29 Dec 2025 17:06:40 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/altstore%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8Emacos/</guid>
      <description>&lt;h1 id=&#34;altstore-使用说明macos&#34;&gt;AltStore 使用说明(MacOS)&lt;/h1&gt;&#xA;&lt;h2 id=&#34;为什么要使用自签名&#34;&gt;为什么要使用自签名&lt;/h2&gt;&#xA;&lt;p&gt;虽然小鸡在每次失效后都及时更新包到线上，但因为签名导致应用ID的变化，使得用户在重新安装小鸡后还需要重新下载之前下载过的游戏，一些设置也无法保留。&#xA;使用自签名的方式安装到手机上的包将会有7天的有效期，即使过期了，重新签名安装后之前下载的游戏和存档都会得到保留，不用再重新下载。因此，小鸡推荐大家使用自签名的方式来安装小鸡模拟器。&lt;/p&gt;&#xA;&lt;h2 id=&#34;自签名的步骤&#34;&gt;自签名的步骤&lt;/h2&gt;&#xA;&lt;h3 id=&#34;一安装altserver&#34;&gt;一、安装AltServer&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;进入 &lt;a href=&#34;https://altstore.io/&#34;&gt;Altstore官网&lt;/a&gt; 首页，在下方找到下载按钮，下载并保存到电脑。若在Mac上操作，下载macOS版；Windows上使用则下载Windows(Beta)版（要求：macOS 10.14.4+ / Windows 10）。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;官网相关界面截图参考：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/1.png&#34; alt=&#34;AltStore官网下载界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;把下载好的软件压缩包解压，将AltServer.app拷贝到长期保存的路径，或/Applications目录下。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;文件路径示例截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/2.png&#34; alt=&#34;文件路径示意图&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;二运行altserver&#34;&gt;二、运行AltServer&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;在macOS Bigsur上运行AltServer.app，系统默认禁止非App Store下载的软件运行，需右键点击软件，选择“打开”（Open）。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;右键菜单截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/3.png&#34; alt=&#34;右键菜单示意图&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;弹出提示“AltServer.app是从互联网下载的应用，是否确定打开？”，点击“Open”即可（Apple已检测无恶意软件）。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;安全提示截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/4.png&#34; alt=&#34;安全提示弹窗&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;三安装altstore到手机&#34;&gt;三、安装AltStore到手机&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;绕过系统限制后，点击系统右上菜单栏中的altserver图标，选择“Install AltStore”，并选择已连接电脑的手机。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;菜单栏操作截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/5.png&#34; alt=&#34;菜单栏选择示意图&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;此时AltServer会要求输入Apple Id与密码，建议使用专门用于玩游戏的Id（密码仅用于Apple认证，不会被保存）。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;账号密码输入截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/6.png&#34; alt=&#34;Apple ID输入界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;若为刚安装的AltServer，会提示安装邮件插件（用于接收验证码、证书验证等），点击“Install Plug-in”。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;邮件插件安装提示截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/7.png&#34; alt=&#34;插件安装提示弹窗&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;安装插件需管理员权限，输入操作系统登陆密码后完成安装，之后重新执行步骤1-2安装AltStore到手机。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;管理员密码输入截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/8.png&#34; alt=&#34;密码输入弹窗&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;四启用邮件通讯插件&#34;&gt;四、启用邮件通讯插件&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;若输入Apple Id与密码后出现“Installation Failed：Could not connect to Mail plug-in”错误，需按以下步骤操作：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;启动“邮件”（Mail）软件，选择“偏好设置”（快捷键：Command+,）。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;邮件软件操作截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/9.png&#34; alt=&#34;邮件偏好设置入口&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;切换到“通用”标签，点击“管理插件”。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;通用标签截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/10.png&#34; alt=&#34;通用标签界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;在弹出窗口中勾选“AltPlugin.mailbundle”，点击“应用并重启邮件”。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;插件管理截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/11.png&#34; alt=&#34;插件勾选界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;保持“邮件”运行状态，返回第三步重新安装AltStore到手机。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;五安装软件&#34;&gt;五、安装软件&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;AltStore安装到手机后，点击图标可能弹出“不受信任的开发者”提示，需进行以下设置：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;打开手机“设置”→“通用”→拉到最下方“设备管理”。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;手机设置路径截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/12.png&#34; alt=&#34;设备管理入口&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;找到对应签名（如“iPhone Developer: CHVZ4H3PWH”），点击“信任”，再次确认“信任”即可。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;信任设置截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/13.png&#34; alt=&#34;开发者信任界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;保持电脑端“AltServer”与“Mail”处于运行状态，返回手机桌面运行AltStore。&lt;/li&gt;&#xA;&lt;li&gt;首次进入或首次安装应用时，需输入安装AltStore时使用的Apple ID登陆（凭据将安全存储在设备钥匙串中，仅用于Apple认证）。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;AltStore登陆界面截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/macos/14.png&#34; alt=&#34;AltStore登陆界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;登陆后可在AltStore中直接安装列出的应用。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;注意：免费开发帐户最多可创建10个证书，因此免费签名安装的应用最多为9个（除去AltStore本身）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;六sideload-应用安装自定义ipa&#34;&gt;六、Sideload 应用（安装自定义IPA）&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;前提条件：电脑端运行“AltServer”与“邮件”，且手机与电脑处于同一网络环境。&lt;/li&gt;&#xA;&lt;li&gt;安装小鸡模拟器IPA：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;用带下载功能的浏览器（如QQ浏览器）访问&lt;a href=&#34;https://www.xiaoji001.com/altstore/resource/mob/5.png&#34;&gt;小鸡模拟器官网&lt;/a&gt;。&lt;/li&gt;&#xA;&lt;li&gt;若显示移动界面，在QQ浏览器设置中→“网页”→“浏览器UA标识”选择“电脑”，刷新页面。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;浏览器UA设置截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/mob/5.png&#34; alt=&#34;UA标识设置界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;点击“iOS下载”→“安装包下载”，等待ipa文件（xiaoji_org.ipa，约76.3MB）下载完成。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;官网下载界面截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/mob/6.png&#34; alt=&#34;小鸡模拟器下载页&#34;&gt;&lt;/li&gt;&#xA;&lt;li&gt;IPA下载弹窗截图：![IPA下载提示](&lt;a href=&#34;https://www.xiaoji001.com/altstore/index.mac.html&#34;&gt;https://www.xiaoji001.com/altstore/index.mac.html&lt;/a&gt; IPA下载截图位置)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;安装IPA文件：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;在下载列表中找到小鸡IPA文件，进入文件预览，点击右下角“发送”→“其他应用”。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;文件发送截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/mob/7.png&#34; alt=&#34;IPA文件发送界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;在应用列表中选择“AltStore”，等待安装完成（可在AltStore的“My Apps”中查看）。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;应用选择截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/mob/8.png&#34; alt=&#34;选择AltStore界面&#34;&gt;&lt;/li&gt;&#xA;&lt;li&gt;安装完成截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/mob/9.png&#34; alt=&#34;My Apps界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;七有效期刷新&#34;&gt;七、有效期刷新&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;自签名应用有效期为7天，需在过期前刷新证书。&lt;/li&gt;&#xA;&lt;li&gt;操作步骤：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;电脑端运行“AltServer”与“邮件”，手机与电脑保持同一网络。&lt;/li&gt;&#xA;&lt;li&gt;打开手机AltStore，进入“My Apps”，找到需刷新的应用，点击右侧时间按钮，等待刷新完成。&#xA;&lt;ul&gt;&#xA;&lt;li&gt;有效期刷新截图：&lt;img src=&#34;https://www.xiaoji001.com/altstore/resource/mob/11.png&#34; alt=&#34;刷新操作界面&#34;&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;补充说明&#34;&gt;补充说明&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;AltStore、Delta、Clip均为Itstor LLC所有，与Nintendo、Apple无关联。&lt;/li&gt;&#xA;&lt;li&gt;若需查看已使用的App ID，可在AltStore→“My Apps”→“View App IDs”中查看，剩余可用数量会显示（如“7 App IDs Remaining”）。&lt;/li&gt;&#xA;&lt;li&gt;刷新操作可批量执行，点击“My Apps”页面的“Refresh All”即可刷新所有应用的有效期。&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>PostgreSQL与Kingbase的差异对比</title>
      <link>https://nexiuss.github.io/posts/postgresql%E4%B8%8Ekingbase%E7%9A%84%E5%B7%AE%E5%BC%82%E5%AF%B9%E6%AF%94/</link>
      <pubDate>Fri, 05 Dec 2025 15:36:35 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/postgresql%E4%B8%8Ekingbase%E7%9A%84%E5%B7%AE%E5%BC%82%E5%AF%B9%E6%AF%94/</guid>
      <description>&lt;h1 id=&#34;postgresql-与-kingbase-的差异对比&#34;&gt;PostgreSQL 与 Kingbase 的差异对比&lt;/h1&gt;&#xA;&lt;p&gt;Kingbase 是基于开源数据库 PostgreSQL 开发的，大部分功能与 PostgreSQL 兼容。Kingbase 8 是基于 PostgreSQL 9.6 的。本文列举发现的 PostgreSQL 9.6 与 Kingbase 8 的差异对比。&lt;/p&gt;&#xA;&lt;h2 id=&#34;1-jdbc&#34;&gt;1 JDBC&lt;/h2&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th style=&#34;text-align: left&#34;&gt;&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: left&#34;&gt;postgresql 9.6&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: left&#34;&gt;kingbase 8&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;driver_class&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;org.postgresql.Driver&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;com.kingbase8.Driver&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;url&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;jdbc:postgresql://127.0.0.1:5432/postgres&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;jdbc:kingbase8://127.0.0.1:54321/kingbase&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;jdbc 的 jar&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;postgresql.jdbc-9.0.jar&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;org.postgresql&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;postgresql.jdbc&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;9.0&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;kingbase8-8.2.0.jar&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;com.kingbase8&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;kingbase8-jdbc&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;8.2.0&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;hibernate 的 jar&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;hibernate-5.0.12.jar&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;org.hibernate&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;hibernate&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;5.0.12&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;hibernate-3.6.0-dialect-1.0.jar&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;com.kingbase&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;hibernate-3.6.0-dialect&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;1.0&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;hibernate 方言&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;org.hibernate.dialect.PostgreSQL9Dialect&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: left&#34;&gt;org.hibernate.dialect.Kingbase8Dialect&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;这里 127.0.0.1 表示本地的 ip 地址。&#xA;5432 是 postgresql 的默认端口；54321 则是达梦的默认端口。&#xA;postgres 是 postgresql 默认的数据库名，kingbase 是 Kingbase 默认的数据库名。&#xA;这些参数可根据实际调整。&lt;/p&gt;</description>
    </item>
    <item>
      <title>闭包</title>
      <link>https://nexiuss.github.io/posts/%E9%97%AD%E5%8C%85/</link>
      <pubDate>Thu, 04 Dec 2025 13:06:08 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/%E9%97%AD%E5%8C%85/</guid>
      <description>&lt;h1 id=&#34;闭包javascript-核心特性深度解析&#34;&gt;闭包：JavaScript 核心特性深度解析&lt;/h1&gt;&#xA;&lt;p&gt;在 JavaScript 中，闭包是一个贯穿初级到高级开发的核心概念，它不仅是语言设计的精妙之处，也是实际开发中解决特定问题的重要工具。理解闭包的本质、原理和应用场景，能帮助开发者写出更优雅、更安全的代码。&lt;/p&gt;&#xA;&lt;h2 id=&#34;一什么是闭包&#34;&gt;一、什么是闭包&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1-核心定义&#34;&gt;1. 核心定义&lt;/h3&gt;&#xA;&lt;p&gt;&lt;em&gt;闭包（Closure）&lt;/em&gt; 是 JavaScript 函数的核心特性：&lt;strong&gt;当一个函数（内部函数）被定义在另一个函数（外部函数）的作用域内，并且内部函数被外部引用时，内部函数会保留对外部函数作用域（词法环境）的访问权限，即使外部函数已经执行完毕、其执行上下文已从调用栈中移除&lt;/strong&gt;。&lt;/p&gt;&#xA;&lt;p&gt;简单来说，闭包的核心是「函数 + 函数定义时的词法环境」，它让函数突破了&amp;quot;调用时只能访问自身作用域和全局作用域&amp;quot;的限制，实现了对外部函数局部变量的持久访问。&lt;/p&gt;&#xA;&lt;h3 id=&#34;2-闭包的形成条件&#34;&gt;2. 闭包的形成条件&lt;/h3&gt;&#xA;&lt;p&gt;闭包的形成必须同时满足以下三个条件，缺一不可：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;嵌套函数结构&lt;/strong&gt;：存在内部函数嵌套在外部函数中；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;作用域访问&lt;/strong&gt;：内部函数引用了外部函数的局部变量（或参数）；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;外部引用&lt;/strong&gt;：外部函数执行后，其返回值（或其他方式）将内部函数暴露到外部作用域，使得内部函数能被外部调用。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;3-闭包的本质原理&#34;&gt;3. 闭包的本质原理&lt;/h3&gt;&#xA;&lt;p&gt;JavaScript 中函数的作用域是在&lt;strong&gt;定义时确定&lt;/strong&gt;的（词法作用域），而非调用时。当外部函数执行时，会创建一个执行上下文，包含局部变量、参数、作用域链等信息。正常情况下，外部函数执行完毕后，其执行上下文会被垃圾回收机制回收。&lt;/p&gt;&#xA;&lt;p&gt;但如果内部函数被外部引用（如作为返回值返回），由于内部函数的作用域链中包含了外部函数的词法环境，外部函数的局部变量会被内部函数&amp;quot;引用持有&amp;quot;，导致垃圾回收机制无法回收这部分内存，从而使内部函数在后续调用时仍能访问这些变量。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例：闭包的本质验证&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;outerFunc&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// 外部函数局部变量&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`Hello, &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// 内部函数：引用外部函数变量&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;innerFunc&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;); &lt;span style=&#34;color:#75715e&#34;&gt;// 访问 outerFunc 的局部变量&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// 暴露内部函数到外部&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;innerFunc&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 外部函数执行完毕后，内部函数被外部引用&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sayHello&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;outerFunc&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;闭包&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sayHello&lt;/span&gt;(); &lt;span style=&#34;color:#75715e&#34;&gt;// 输出：Hello, 闭包（此时 outerFunc 已执行完毕，但 message 仍可访问）&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;二闭包的特点与优缺点&#34;&gt;二、闭包的特点与优缺点&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1-核心特点&#34;&gt;1. 核心特点&lt;/h3&gt;&#xA;&lt;p&gt;基于闭包的原理，其具有以下三个关键特点：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;外部访问内部变量&lt;/strong&gt;：突破作用域限制，让外部代码间接访问函数内部的局部变量；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;变量持久化&lt;/strong&gt;：外部函数的局部变量不会随函数执行完毕而销毁，会常驻内存直到内部函数被销毁；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;隔离作用域&lt;/strong&gt;：创建独立的私有作用域，避免变量污染全局或其他作用域。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;2-闭包的优势&#34;&gt;2. 闭包的优势&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;创建私有变量与方法&lt;/strong&gt;：实现数据封装，避免全局变量污染。例如模拟类的私有成员，仅通过暴露的接口访问数据；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;延伸变量作用域&lt;/strong&gt;：让局部变量在函数执行后仍能被使用，适用于需要&amp;quot;记忆&amp;quot;状态的场景（如计数器、缓存）；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;模块化开发&lt;/strong&gt;：早期 JavaScript 没有模块化机制时，闭包是实现模块化的核心方案（如 IIFE 模式），隔离不同模块的变量冲突；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;回调函数场景适配&lt;/strong&gt;：在定时器、事件监听、Promise 等异步回调中，闭包能保留回调执行所需的上下文环境。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;3-闭包的潜在问题&#34;&gt;3. 闭包的潜在问题&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;内存占用&lt;/strong&gt;：闭包会使外部函数的变量常驻内存，若大量创建闭包且未及时释放，可能导致内存泄漏；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;性能损耗&lt;/strong&gt;：闭包的作用域链查找比普通函数更长，频繁调用可能带来轻微的性能开销；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调试难度增加&lt;/strong&gt;：闭包的变量生命周期复杂，若逻辑设计不当，可能导致变量状态混乱，难以调试。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;三闭包的典型使用场景&#34;&gt;三、闭包的典型使用场景&lt;/h2&gt;&#xA;&lt;p&gt;闭包在实际开发中应用广泛，以下是最常见的场景及实践示例：&lt;/p&gt;</description>
    </item>
    <item>
      <title>Commons Dbutils</title>
      <link>https://nexiuss.github.io/posts/commons-dbutils-copy/</link>
      <pubDate>Mon, 03 Nov 2025 15:53:09 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/commons-dbutils-copy/</guid>
      <description>&lt;h1 id=&#34;commons-dbutils&#34;&gt;commons-dbutils&lt;/h1&gt;&#xA;&lt;h2 id=&#34;1项目介绍&#34;&gt;1.项目介绍&lt;/h2&gt;&#xA;&lt;p&gt;commons-dbutils 是一个简化 JDBC 操作的 Java 工具包，它提供了一组数据库操作辅助类，能够极大地减少代码量，提高开发效率。该项目属于 Apache Commons 组件库的一部分，以提供简单的数据库访问API为核心，通过简单的抽象，隐藏了JDBC的复杂性，但同时保留了强大的功能。&lt;/p&gt;&#xA;&lt;h3 id=&#34;11-项目结构和主要组件&#34;&gt;1.1 项目结构和主要组件&lt;/h3&gt;&#xA;&lt;p&gt;在项目结构上， commons-dbutils 主要包括以下几个核心组件：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;QueryRunner&lt;/strong&gt; ：核心类，提供简化执行SQL查询和更新的方法。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ResultSetHandler&lt;/strong&gt; ：结果集处理器，定义了处理查询结果的标准接口。&#xA;这些组件通过提供一致的API接口和灵活的扩展性，允许开发者能够以声明式的方式与数据库进行交互，大幅减少了样板代码。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;12-开始使用-commons-dbutils&#34;&gt;1.2 开始使用 commons-dbutils&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;commons-dbutils&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-dbutils&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.7&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;现在，您已经准备好使用 &lt;code&gt;commons-dbutils&lt;/code&gt; 进行数据库操作了。接下来章节将详细介绍如何使用 &lt;code&gt;QueryRunner&lt;/code&gt; 类进行数据库的增删改查操作，以及如何优化这些操作以提高性能。&lt;/p&gt;&#xA;&lt;h2 id=&#34;2-queryrunner核心类及其作用&#34;&gt;2. QueryRunner核心类及其作用&lt;/h2&gt;&#xA;&lt;h3 id=&#34;21-queryrunner类的定义和用途&#34;&gt;2.1 QueryRunner类的定义和用途&lt;/h3&gt;&#xA;&lt;h4 id=&#34;211-queryrunner类的基本功能&#34;&gt;2.1.1 QueryRunner类的基本功能&lt;/h4&gt;&#xA;&lt;p&gt;QueryRunner是Apache Commons DbUtils库中的核心类之一，它为数据库操作提供了一个轻量级的解决方案。QueryRunner的职责是简化JDBC代码，使开发者能够以更少的代码量来执行SQL查询和更新。它支持两种类型的构造器：无参构造器和带DataSource参数的构造器。使用无参构造器时，用户需要手动提供Connection对象来执行数据库操作；而使用带DataSource参数的构造器，则可以直接利用DbUtils提供的自动关闭连接的功能，无需手动管理Connection的生命周期。&lt;/p&gt;&#xA;&lt;p&gt;QueryRunner的主要特点包括：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;简化数据库操作代码&lt;/li&gt;&#xA;&lt;li&gt;支持基本的查询和更新方法&lt;/li&gt;&#xA;&lt;li&gt;支持使用DataSource自动管理连接&lt;/li&gt;&#xA;&lt;li&gt;提供异常处理机制&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;通过QueryRunner，开发者可以更加专注于业务逻辑的实现，而不是繁琐的资源管理细节。例如，执行一个简单的查询操作，通过QueryRunner类的实现可以减少很多样板代码。&lt;/p&gt;&#xA;&lt;h4 id=&#34;212-queryrunner类在项目中的重要性&#34;&gt;2.1.2 QueryRunner类在项目中的重要性&lt;/h4&gt;&#xA;&lt;p&gt;在许多Java项目中，尤其是那些需要频繁与数据库交互的应用程序中，能够有效地简化数据库操作是非常重要的。QueryRunner类作为一个工具类，提供了这些简化操作的方法，能够显著减少开发时间和提高代码的可读性与可维护性。&lt;/p&gt;&#xA;&lt;p&gt;使用QueryRunner类，开发人员可以避免直接与JDBC打交道，减少了那些重复的模板代码，如手动开启和关闭数据库连接、异常处理等。这样不仅提高了开发效率，也降低了出错的可能性。&lt;/p&gt;&#xA;&lt;p&gt;此外，QueryRunner支持自动提交和手动事务控制两种模式，使得它既可以用于简单的脚本程序，也可以用于需要事务管理的复杂业务场景。这意味着开发者可以根据实际需求灵活地使用QueryRunner，从而在开发过程中实现更高效的数据库操作。&lt;/p&gt;&#xA;&lt;h3 id=&#34;22-queryrunner与其它数据库工具类的比较&#34;&gt;2.2 QueryRunner与其它数据库工具类的比较&lt;/h3&gt;&#xA;&lt;h4 id=&#34;221-queryrunner与其他数据库工具类的共性和差异&#34;&gt;2.2.1 QueryRunner与其他数据库工具类的共性和差异&lt;/h4&gt;&#xA;&lt;p&gt;在Java生态中，有许多数据库操作框架和工具类，比如JDBC、Hibernate、MyBatis等。QueryRunner与这些工具类相比，既有共性也有差异。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;共性&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;都是为了简化数据库操作而设计的。&lt;/li&gt;&#xA;&lt;li&gt;都需要配置数据库连接参数，比如URL、用户名和密码。&lt;/li&gt;&#xA;&lt;li&gt;都提供了SQL语句的执行接口。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;差异&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;QueryRunner vs JDBC&lt;/strong&gt;：JDBC是一种低级的API，需要开发者手动管理数据库连接和资源，处理异常。QueryRunner是建立在JDBC之上的一层抽象，它可以自动管理资源，并简化异常处理。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;QueryRunner vs Hibernate/MyBatis&lt;/strong&gt;：Hibernate和MyBatis提供了更为丰富的ORM（对象关系映射）功能，可以自动将数据库表映射到Java对象。而QueryRunner则更轻量级，专注于简化SQL执行，不涉及对象映射。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;222-queryrunner的优势和局限性&#34;&gt;2.2.2 QueryRunner的优势和局限性&lt;/h4&gt;&#xA;&lt;p&gt;QueryRunner的优势在于它的轻量级和易用性。由于其与JDBC紧密集成，它对数据库的直接操作提供了最大的灵活性。同时，它适合在那些不需要复杂ORM特性的项目中使用，因此可以作为其他大型持久层框架的补充。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Commons Dbutils</title>
      <link>https://nexiuss.github.io/posts/commons-dbutils/</link>
      <pubDate>Mon, 03 Nov 2025 15:53:09 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/commons-dbutils/</guid>
      <description>&lt;h1 id=&#34;commons-dbutils&#34;&gt;commons-dbutils&lt;/h1&gt;&#xA;&lt;h2 id=&#34;1项目介绍&#34;&gt;1.项目介绍&lt;/h2&gt;&#xA;&lt;p&gt;commons-dbutils 是一个简化 JDBC 操作的 Java 工具包，它提供了一组数据库操作辅助类，能够极大地减少代码量，提高开发效率。该项目属于 Apache Commons 组件库的一部分，以提供简单的数据库访问API为核心，通过简单的抽象，隐藏了JDBC的复杂性，但同时保留了强大的功能。&lt;/p&gt;&#xA;&lt;h3 id=&#34;11-项目结构和主要组件&#34;&gt;1.1 项目结构和主要组件&lt;/h3&gt;&#xA;&lt;p&gt;在项目结构上， commons-dbutils 主要包括以下几个核心组件：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;QueryRunner&lt;/strong&gt; ：核心类，提供简化执行SQL查询和更新的方法。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ResultSetHandler&lt;/strong&gt; ：结果集处理器，定义了处理查询结果的标准接口。&#xA;这些组件通过提供一致的API接口和灵活的扩展性，允许开发者能够以声明式的方式与数据库进行交互，大幅减少了样板代码。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;12-开始使用-commons-dbutils&#34;&gt;1.2 开始使用 commons-dbutils&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;commons-dbutils&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-dbutils&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.7&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;现在，您已经准备好使用 &lt;code&gt;commons-dbutils&lt;/code&gt; 进行数据库操作了。接下来章节将详细介绍如何使用 &lt;code&gt;QueryRunner&lt;/code&gt; 类进行数据库的增删改查操作，以及如何优化这些操作以提高性能。&lt;/p&gt;&#xA;&lt;h2 id=&#34;2-queryrunner核心类及其作用&#34;&gt;2. QueryRunner核心类及其作用&lt;/h2&gt;&#xA;&lt;h3 id=&#34;21-queryrunner类的定义和用途&#34;&gt;2.1 QueryRunner类的定义和用途&lt;/h3&gt;&#xA;&lt;h4 id=&#34;211-queryrunner类的基本功能&#34;&gt;2.1.1 QueryRunner类的基本功能&lt;/h4&gt;&#xA;&lt;p&gt;QueryRunner是Apache Commons DbUtils库中的核心类之一，它为数据库操作提供了一个轻量级的解决方案。QueryRunner的职责是简化JDBC代码，使开发者能够以更少的代码量来执行SQL查询和更新。它支持两种类型的构造器：无参构造器和带DataSource参数的构造器。使用无参构造器时，用户需要手动提供Connection对象来执行数据库操作；而使用带DataSource参数的构造器，则可以直接利用DbUtils提供的自动关闭连接的功能，无需手动管理Connection的生命周期。&lt;/p&gt;&#xA;&lt;p&gt;QueryRunner的主要特点包括：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;简化数据库操作代码&lt;/li&gt;&#xA;&lt;li&gt;支持基本的查询和更新方法&lt;/li&gt;&#xA;&lt;li&gt;支持使用DataSource自动管理连接&lt;/li&gt;&#xA;&lt;li&gt;提供异常处理机制&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;通过QueryRunner，开发者可以更加专注于业务逻辑的实现，而不是繁琐的资源管理细节。例如，执行一个简单的查询操作，通过QueryRunner类的实现可以减少很多样板代码。&lt;/p&gt;&#xA;&lt;h4 id=&#34;212-queryrunner类在项目中的重要性&#34;&gt;2.1.2 QueryRunner类在项目中的重要性&lt;/h4&gt;&#xA;&lt;p&gt;在许多Java项目中，尤其是那些需要频繁与数据库交互的应用程序中，能够有效地简化数据库操作是非常重要的。QueryRunner类作为一个工具类，提供了这些简化操作的方法，能够显著减少开发时间和提高代码的可读性与可维护性。&lt;/p&gt;&#xA;&lt;p&gt;使用QueryRunner类，开发人员可以避免直接与JDBC打交道，减少了那些重复的模板代码，如手动开启和关闭数据库连接、异常处理等。这样不仅提高了开发效率，也降低了出错的可能性。&lt;/p&gt;&#xA;&lt;p&gt;此外，QueryRunner支持自动提交和手动事务控制两种模式，使得它既可以用于简单的脚本程序，也可以用于需要事务管理的复杂业务场景。这意味着开发者可以根据实际需求灵活地使用QueryRunner，从而在开发过程中实现更高效的数据库操作。&lt;/p&gt;&#xA;&lt;h3 id=&#34;22-queryrunner与其它数据库工具类的比较&#34;&gt;2.2 QueryRunner与其它数据库工具类的比较&lt;/h3&gt;&#xA;&lt;h4 id=&#34;221-queryrunner与其他数据库工具类的共性和差异&#34;&gt;2.2.1 QueryRunner与其他数据库工具类的共性和差异&lt;/h4&gt;&#xA;&lt;p&gt;在Java生态中，有许多数据库操作框架和工具类，比如JDBC、Hibernate、MyBatis等。QueryRunner与这些工具类相比，既有共性也有差异。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;共性&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;都是为了简化数据库操作而设计的。&lt;/li&gt;&#xA;&lt;li&gt;都需要配置数据库连接参数，比如URL、用户名和密码。&lt;/li&gt;&#xA;&lt;li&gt;都提供了SQL语句的执行接口。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;差异&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;QueryRunner vs JDBC&lt;/strong&gt;：JDBC是一种低级的API，需要开发者手动管理数据库连接和资源，处理异常。QueryRunner是建立在JDBC之上的一层抽象，它可以自动管理资源，并简化异常处理。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;QueryRunner vs Hibernate/MyBatis&lt;/strong&gt;：Hibernate和MyBatis提供了更为丰富的ORM（对象关系映射）功能，可以自动将数据库表映射到Java对象。而QueryRunner则更轻量级，专注于简化SQL执行，不涉及对象映射。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;222-queryrunner的优势和局限性&#34;&gt;2.2.2 QueryRunner的优势和局限性&lt;/h4&gt;&#xA;&lt;p&gt;QueryRunner的优势在于它的轻量级和易用性。由于其与JDBC紧密集成，它对数据库的直接操作提供了最大的灵活性。同时，它适合在那些不需要复杂ORM特性的项目中使用，因此可以作为其他大型持久层框架的补充。&lt;/p&gt;</description>
    </item>
    <item>
      <title>DuckTyping</title>
      <link>https://nexiuss.github.io/posts/ducktyping/</link>
      <pubDate>Tue, 28 Oct 2025 09:59:40 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/ducktyping/</guid>
      <description>&lt;h1 id=&#34;鸭子类型duck-typing&#34;&gt;鸭子类型（Duck Typing）&lt;/h1&gt;&#xA;&lt;h3 id=&#34;鸭子类型duck-typing的定义&#34;&gt;鸭子类型（Duck Typing）的定义&lt;/h3&gt;&#xA;&lt;p&gt;鸭子类型是一种动态类型语言的编程风格，其核心思想是:“如果对象的行为像鸭子（具备特定方法或属性），那么它就是鸭子”它不依赖显式继承或接口声明，而是通过运行时检查对象是否具备所需行为来判断类型合法性&lt;/p&gt;&#xA;&lt;h3 id=&#34;鸭子类型duck-typing的示例&#34;&gt;鸭子类型（Duck Typing）的示例&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Duck&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;quack&lt;/span&gt;(self):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Quack&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Cat&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;quack&lt;/span&gt;(self):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Meow&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;animal_sound&lt;/span&gt;(animal):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    animal&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;quack()  &lt;span style=&#34;color:#75715e&#34;&gt;# 只要对象有quack方法即可调用&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;animal_sound(Duck())  &lt;span style=&#34;color:#75715e&#34;&gt;# 输出: Quack&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;animal_sound(Cat())   &lt;span style=&#34;color:#75715e&#34;&gt;# 输出: Meow&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此例中，animal_sound函数不关心传入对象的类型，只要其有quack方法即可执行&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;优点&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;灵活性高：代码不依赖具体类型，允许不同类通过相同方法实现多态&lt;/li&gt;&#xA;&lt;li&gt;减少冗余代码：无需强制继承或实现接口，简化设计&lt;/li&gt;&#xA;&lt;li&gt;动态适配：运行时检查行为，支持快速迭代和扩展&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;缺点&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;运行时错误风险：若对象缺少预期方法，错误可能在执行时暴露（如AttributeError)&lt;/li&gt;&#xA;&lt;li&gt;维护难度：代码量增大后，类型隐式依赖可能导致逻辑混乱&lt;/li&gt;&#xA;&lt;li&gt;静态检查缺失：静态类型语言（如Java）需通过反射模拟，增加复杂度&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;鸭子类型与golang&#34;&gt;鸭子类型与Golang&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;接口的隐式实现&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 定义接口 Duck，要求实现 Quack() 方法&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Duck&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;Quack&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// 鸭子必须会“嘎嘎”叫&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 实现 Duck 接口的结构体：RealDuck（真实鸭子）&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RealDuck&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RealDuck&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Quack&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Quack! Quack!&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// 真实鸭子的叫声&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 实现 Duck 接口的结构体：ToyDuck（玩具鸭子）&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ToyDuck&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ToyDuck&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Quack&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Squeak! Squeak!&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// 玩具鸭子的叫声&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 接收 Duck 接口的函数&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MakeDuckQuack&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Duck&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Quack&lt;/span&gt;()) &lt;span style=&#34;color:#75715e&#34;&gt;// 调用接口的 Quack 方法&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// 实例化不同类型的鸭子&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;real&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RealDuck&lt;/span&gt;{}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;toy&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ToyDuck&lt;/span&gt;{}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#75715e&#34;&gt;// 传递给函数时，无需关心具体类型，只要实现接口即可&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;MakeDuckQuack&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;real&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// 输出：Quack! Quack!&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;MakeDuckQuack&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;toy&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;// 输出：Squeak! Squeak!&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;关键点&lt;/p&gt;</description>
    </item>
    <item>
      <title>HibernateTemplate工作原理</title>
      <link>https://nexiuss.github.io/posts/hibernatetemplate%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</link>
      <pubDate>Fri, 26 Sep 2025 16:11:41 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/hibernatetemplate%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</guid>
      <description>&lt;h1 id=&#34;hibernatetemplate工作原理&#34;&gt;HibernateTemplate工作原理&lt;/h1&gt;&#xA;&lt;p&gt;HibernateTemplate的生成SQL的过程实际上是Hibernate核心机制的体现，它同时依赖于hbm文件(或注解)的映射元数据和实体对象的反射机制&lt;/p&gt;&#xA;&lt;h2 id=&#34;工作机制详解&#34;&gt;工作机制详解&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;HibernateTemplate的角色&#xA;HibernateTemplate是Spring对Hibernate的封装工具类，其save方法最终会通过回调机制(HibernateCallback)委托给底层的Hibernate Session执行。这种设计模式(Template Method)简化了事务管理和异常处理，但SQL生成仍由Hibernate原生机制完成&lt;/li&gt;&#xA;&lt;li&gt;SQL生成的双重依赖&#xA;映射元数：hbm文件或注解定义了实体类与数据库表的映射关系（如表名、字段名、主键等），这是SQL语句结构的基础&#xA;对象反射：运行时通过反射获取实体对象的当前属性值，动态填充SQL参数&#xA;例如插入User对象时，Hibernate会结合User.hbm.xml定义的字段映射和对象实例的name/age等属性值生成完整INSERT语句&lt;/li&gt;&#xA;&lt;li&gt;具体执行流程&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;HibernateTemplate.save()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;→ Session.save()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;→ 通过EntityPersister解析映射元数据&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;→ 反射获取属性值&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;→ 生成带参数的SQL&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;→ 执行JDBC操作&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;技术实现特点&#xA;元数据优先：如果没有hbm文件或注解定义映射关系，仅靠反射无法确定表结构和字段类型&#xA;动态适配：同一映射配置可服务于不同对象实例，反射机制确保每次插入都能获取实时数据&#xA;性能优化：Hibernate会缓存生成的SQL模板，仅反射获取值部分需要实时计算&#xA;这种设计实现了ORM的核心价值：开发者操作对象，框架自动处理数据库交互细节。&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>Maven中profiles实践</title>
      <link>https://nexiuss.github.io/posts/maven%E4%B8%ADprofiles%E5%AE%9E%E8%B7%B5/</link>
      <pubDate>Fri, 25 Jul 2025 17:53:21 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/maven%E4%B8%ADprofiles%E5%AE%9E%E8%B7%B5/</guid>
      <description>&lt;h1 id=&#34;maven中profiles实践&#34;&gt;Maven中profiles实践&lt;/h1&gt;&#xA;&lt;p&gt;pom.xml&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;dev&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;activation&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;activeByDefault&amp;gt;&lt;/span&gt;true&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/activeByDefault&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/activation&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;env&amp;gt;&lt;/span&gt;dev&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/env&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;test&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;env&amp;gt;&lt;/span&gt;test&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/env&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;pro&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;env&amp;gt;&lt;/span&gt;pro&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/env&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;build&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;resources&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;resource&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;directory&amp;gt;&lt;/span&gt;src/main/resources&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/directory&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filtering&amp;gt;&lt;/span&gt;true&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filtering&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;includes&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;include&amp;gt;&lt;/span&gt;application-${env}.properties&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/include&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;include&amp;gt;&lt;/span&gt;application.properties&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/include&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/includes&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/resource&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/resources&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;resources&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;├── application-dev.properties&#xA;├── application-pro.properties&#xA;└── application.properties&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;application.properties&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-properties&#34; data-lang=&#34;properties&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;profiles.active&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;@env@&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;PropertiesLoader.java&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PropertiesLoader&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loadProperties&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            System.&lt;span style=&#34;color:#a6e22e&#34;&gt;getProperties&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;load&lt;/span&gt;(PropertiesLoader.&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getClassLoader&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;getResourceAsStream&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;application.properties&amp;#34;&lt;/span&gt;));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            String profileActive &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; System.&lt;span style=&#34;color:#a6e22e&#34;&gt;getProperty&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;profiles.active&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            System.&lt;span style=&#34;color:#a6e22e&#34;&gt;getProperties&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;load&lt;/span&gt;(PropertiesLoader.&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getClassLoader&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;getResourceAsStream&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;application-&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; profileActive &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;.properties&amp;#34;&lt;/span&gt;));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (IOException e) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RuntimeException(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;加载配置文件失败！&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>Spring缓存</title>
      <link>https://nexiuss.github.io/posts/spring%E7%BC%93%E5%AD%98/</link>
      <pubDate>Fri, 11 Jul 2025 11:01:17 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/spring%E7%BC%93%E5%AD%98/</guid>
      <description>&lt;h1 id=&#34;spring缓存&#34;&gt;Spring缓存&lt;/h1&gt;&#xA;&lt;h3 id=&#34;spring缓存介绍&#34;&gt;Spring缓存介绍&lt;/h3&gt;&#xA;&lt;p&gt;@Cacheable 是 Spring Framework 提供的一个注解，用于方法级别的缓存管理。当一个被标注为 @Cacheable 的方法被调用时，它会先检查缓存中是否有对应的结果。如果有，则直接返回缓存结果，而不会执行方法逻辑。如果没有，则执行方法逻辑并将结果存入缓存，以便下次调用时直接使用缓存值。&lt;/p&gt;&#xA;&lt;h3 id=&#34;作用&#34;&gt;作用&lt;/h3&gt;&#xA;&lt;p&gt;@Cacheable 注解的作用是将方法的返回值缓存起来，以提高系统的性能。当一个方法被多次调用时，如果缓存中已经存在该方法的返回值，则可以直接从缓存中获取，而不需要再次执行方法逻辑。这样可以避免重复计算，提高系统的响应速度。&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;提升性能：避免重复调用耗时的计算或 I/O 操作（如数据库查询或远程调用）。&lt;/li&gt;&#xA;&lt;li&gt;减少资源消耗：减少系统对外部依赖（如数据库、API）的访问频率。&lt;/li&gt;&#xA;&lt;li&gt;简单易用：通过注解配置，无需显式管理缓存逻辑。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;使用场景&#34;&gt;使用场景&lt;/h3&gt;&#xA;&lt;p&gt;@Cacheable 注解适用于以下场景：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;数据库查询：对于频繁查询的数据，可以使用 @Cacheable 注解将查询结果缓存起来，避免重复查询数据库。&lt;/li&gt;&#xA;&lt;li&gt;计算密集型任务：对于计算密集型任务，可以使用 @Cacheable 注解将计算结果缓存起来，避免重复计算。&lt;/li&gt;&#xA;&lt;li&gt;外部服务调用：对于外部服务调用，可以使用 @Cacheable 注解将调用结果缓存起来，避免重复调用外部服务。&lt;/li&gt;&#xA;&lt;li&gt;高并发场景：对于高并发场景，可以使用 @Cacheable 注解将热点数据缓存起来，避免热点数据的频繁访问。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;heading&#34;&gt;&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;@Cacheable(&#xA;    cacheNames = ..., // 缓存的名字（可理解为缓存的分类）&#xA;    key = ...,        // 缓存的键（默认使用方法参数作为键）&#xA;    unless = ...,     // 条件表达式，返回 true 时不会缓存&#xA;    condition = ...   // 条件表达式，返回 true 时才缓存&#xA;)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;caffeine-本地缓存&#34;&gt;Caffeine 本地缓存&lt;/h3&gt;&#xA;&lt;p&gt;Caffeine 是一个高性能、本地缓存库，提供类似于 Guava Cache 的功能，并且性能更优&lt;/p&gt;&#xA;&lt;h3 id=&#34;二级缓存&#34;&gt;二级缓存&lt;/h3&gt;&#xA;&lt;p&gt;先查本地Caffeine缓存，未命中再查Redis缓存，最后才查数据库。缓存更新时会同时更新两级缓存。可以根据实际需求调整缓存过期时间和大小等参数。&lt;/p&gt;&#xA;&lt;h3 id=&#34;代码&#34;&gt;代码&lt;/h3&gt;&#xA;&lt;p&gt;pom.xml&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- Spring Boot Starter --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-web&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- Caffeine 缓存 --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.github.ben-manes.caffeine&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;caffeine&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.1.8&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- Redis --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-data-redis&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;CacheConfig.java&lt;/p&gt;</description>
    </item>
    <item>
      <title>JSON RPC2.0规范</title>
      <link>https://nexiuss.github.io/posts/json-rpc2.0%E8%A7%84%E8%8C%83/</link>
      <pubDate>Fri, 11 Jul 2025 10:15:01 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/json-rpc2.0%E8%A7%84%E8%8C%83/</guid>
      <description>&lt;h1 id=&#34;json-rpc-20-规范中文版&#34;&gt;JSON-RPC 2.0 规范(中文版)&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://wiki.geekdream.com/Specification/json-rpc_2.0.html&#34;&gt;![JSON-RPC 2.0 规范(中文版)]&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Oracle中utf 8中文占用</title>
      <link>https://nexiuss.github.io/posts/oracle%E4%B8%ADutf-8%E4%B8%AD%E6%96%87%E5%8D%A0%E7%94%A8/</link>
      <pubDate>Tue, 10 Jun 2025 18:39:39 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/oracle%E4%B8%ADutf-8%E4%B8%AD%E6%96%87%E5%8D%A0%E7%94%A8/</guid>
      <description>&lt;h1 id=&#34;oracle中utf-8中文占用&#34;&gt;Oracle中utf 8中文占用&lt;/h1&gt;&#xA;&lt;h2 id=&#34;储存原理&#34;&gt;储存原理&lt;/h2&gt;&#xA;&lt;p&gt;UTF-8 是一种可变长 Unicode 编码：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;基本 ASCII 字符（如英文字母、数字）占用 1 个字节。&lt;/li&gt;&#xA;&lt;li&gt;绝大多数常用汉字及其他 Unicode 扩展字符（涵盖中日韩等文字）占用 3 个字节&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;字段长度限制的影响&#34;&gt;字段长度限制的影响&lt;/h2&gt;&#xA;&lt;p&gt;Oracle 中 VARCHAR2(N) 默认定义的是字节长度（BYTE 语义）：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;VARCHAR2(10) 表示最多存储 10 个字节。&lt;/li&gt;&#xA;&lt;li&gt;在 UTF-8 数据库中，最多可存储 3 个中文字符（3 字符 * 3 字节/字符 = 9 字节），剩余 1 字节不足以存储第 4 个汉字&lt;/li&gt;&#xA;&lt;li&gt;若需按字符数定义长度，需显式指定 CHAR 语义：VARCHAR2(10 CHAR）&#xA;此时表示最多存储 10 个字符，不论字符类型：&lt;/li&gt;&#xA;&lt;li&gt;可存 10 个汉字（共占用 30 字节）&lt;/li&gt;&#xA;&lt;li&gt;或 10 个英文字母（共占用 10 字节）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;验证方法&#34;&gt;验证方法&lt;/h2&gt;&#xA;&lt;p&gt;查询数据库字符集：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt; USERENV(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;LANGUAGE&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt; dual; &lt;span style=&#34;color:#75715e&#34;&gt;-- 结果应包含 AL32UTF8 或 UTF8&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt; value &lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt; NLS_DATABASE_PARAMETERS &lt;span style=&#34;color:#66d9ef&#34;&gt;WHERE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;parameter&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NLS_CHARACTERSET&amp;#39;&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;-- 结果应为 AL32UTF8 或 UTF8&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;查询单个汉字字节长度：&lt;/p&gt;</description>
    </item>
    <item>
      <title>权威主义和共识主义</title>
      <link>https://nexiuss.github.io/posts/%E6%9D%83%E5%A8%81%E4%B8%BB%E4%B9%89%E5%92%8C%E5%85%B1%E8%AF%86%E4%B8%BB%E4%B9%89/</link>
      <pubDate>Thu, 05 Jun 2025 10:12:36 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/%E6%9D%83%E5%A8%81%E4%B8%BB%E4%B9%89%E5%92%8C%E5%85%B1%E8%AF%86%E4%B8%BB%E4%B9%89/</guid>
      <description>&lt;h1 id=&#34;权威主义和共识主义&#34;&gt;权威主义和共识主义&lt;/h1&gt;&#xA;&lt;p&gt;权威主义与共识主义是两种不同的政治理念和实践模式，它们在权力结构、决策方式和社会整合等方面存在显著差异：&lt;/p&gt;&#xA;&lt;h2 id=&#34;一权威主义&#34;&gt;一、权威主义&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;定义与特征&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;权威主义是一种介于极权政治与现代民主之间的过渡型政治体制，强调集中权力和强制服从。&#xA;其核心特征包括：政治权力集中于少数精英或个人，社会控制有限，常以民族主义或实用主义动员社会支持。&#xA;新权威主义则强调通过权威保障市场化改革，避免政治多元化导致的混乱，如东亚发展模式中的“硬政府、软经济”。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;理论依依据&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;恩格斯认为权威是社会化的必然产物，代表秩序与稳定；而弗洛姆提出“权威人格”理论，解释个体对强权服从的心理机制。&#xA;在领导力层面，权威主义依赖领导者明确的目标设定和决策能力，如企业攻坚阶段的集中管理。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;争议与批判&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;批评者指出，权威主义可能压制自由，导致权力滥用，历史上许多强权政权最终崩溃。&#xA;但支持者认为，在发展中国家现代化初期，权威主义能有效整合资源、推动改革。&lt;/p&gt;&#xA;&lt;h2 id=&#34;二共识主义&#34;&gt;二、共识主义&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;核心理念&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;共识主义强调通过沟通与协商形成集体共识，主张多元利益的协调而非排他性权威。&#xA;其目标是构建包容性社会秩序，如中国共产党通过统一战线、理论创新凝聚政治共识。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;实践形式&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;在组织管理中，“共享领导”理论体现共识主义，要求团队成员共同承担责任、参与决策。&#xA;国际关系中的多边主义也属于共识主义实践，如中国倡导的共商共建共享原则。&#xA;与权威主义的对比&lt;/p&gt;&#xA;&lt;p&gt;权威主义依赖自上而下的控制，共识主义则通过横向协商达成一致。&#xA;共识主义更注重程序正义和多元参与，但可能面临效率挑战；权威主义效率较高，但缺乏民主合法性&lt;/p&gt;&#xA;&lt;h2 id=&#34;三当代应用与融合&#34;&gt;三、当代应用与融合&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;治理中尝试结合两者：以党的权威推动改革，同时通过协商民主（如政协制度）吸纳多元意见&lt;/li&gt;&#xA;&lt;li&gt;国际社会呼吁以真正的多边主义（共识主义）替代霸权逻辑，但需平衡主权平等与集体行动效率&lt;/li&gt;&#xA;&lt;li&gt;两种主义各有优劣，其适用性取决于社会发展阶段和具体语境。未来趋势可能是探索权威与共识的动态平衡，以实现稳定与包容的统一&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;反思：权威主义在一个强有力的权威领导下，能迸发出极大的力量，但这种力量就人类历史看来太过短暂了，就像流星一样划过天际便没了踪影。他只能保证几代人的繁荣与稳定，但对未来却不会留有太大的影响，历史的创造者终究是人民，但人类的历史和未来的长河究竟要通向何处，绝不应该交由少数人来决定，要人民自己来选择，也要由人民自己来承担。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Redis集群防止缓存穿透及雪崩的方案</title>
      <link>https://nexiuss.github.io/posts/redis%E9%9B%86%E7%BE%A4%E9%98%B2%E6%AD%A2%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E5%8F%8A%E9%9B%AA%E5%B4%A9%E7%9A%84%E6%96%B9%E6%A1%88/</link>
      <pubDate>Tue, 29 Apr 2025 15:12:38 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/redis%E9%9B%86%E7%BE%A4%E9%98%B2%E6%AD%A2%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E5%8F%8A%E9%9B%AA%E5%B4%A9%E7%9A%84%E6%96%B9%E6%A1%88/</guid>
      <description>&lt;h1 id=&#34;redis集群防止缓存穿透及雪崩的方案&#34;&gt;Redis集群防止缓存穿透及雪崩的方案&lt;/h1&gt;&#xA;&lt;h2 id=&#34;缓存穿透解决方案&#34;&gt;缓存穿透解决方案&lt;/h2&gt;&#xA;&lt;p&gt;缓存穿透是指查询一个不存在的数据，由于缓存中不存在，请求会直接打到数据库上：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;布隆过滤器(Bloom Filter)&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;在访问Redis前，先通过布隆过滤器判断key是否存在&lt;/li&gt;&#xA;&lt;li&gt;不存在则直接返回，避免查询数据库&lt;/li&gt;&#xA;&lt;li&gt;实现方式：可以使用Redis的&lt;code&gt;RedisBloom&lt;/code&gt;模块&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;空值缓存&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;对于查询结果为null的key，也进行缓存&lt;/li&gt;&#xA;&lt;li&gt;设置较短的过期时间(如30秒-1分钟)&lt;/li&gt;&#xA;&lt;li&gt;示例代码：&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;String value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; redis.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(key);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (value &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; db.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(key);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (value &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// 缓存空值&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        redis.&lt;span style=&#34;color:#a6e22e&#34;&gt;setex&lt;/span&gt;(key, 60, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NULL&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        redis.&lt;span style=&#34;color:#a6e22e&#34;&gt;setex&lt;/span&gt;(key, 300, value);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NULL&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;equals&lt;/span&gt;(value)) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;接口层校验&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;对请求参数进行合法性校验&lt;/li&gt;&#xA;&lt;li&gt;如ID必须为正整数，否则直接拒绝&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;缓存雪崩解决方案&#34;&gt;缓存雪崩解决方案&lt;/h2&gt;&#xA;&lt;p&gt;缓存雪崩是指大量缓存同时失效，导致所有请求直接打到数据库：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;差异化过期时间&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;为不同key设置随机的过期时间&lt;/li&gt;&#xA;&lt;li&gt;避免大量key同时过期&lt;/li&gt;&#xA;&lt;li&gt;示例：基础过期时间+随机值(如300-600秒)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;多级缓存架构&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;本地缓存(如Caffeine) + Redis集群 + 数据库&lt;/li&gt;&#xA;&lt;li&gt;多级缓存可以分散压力&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;热点数据永不过期&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;对极热点数据设置永不过期&lt;/li&gt;&#xA;&lt;li&gt;通过后台任务定期更新缓存&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;互斥锁重建缓存&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;当缓存失效时，使用分布式锁控制只有一个线程去重建缓存&lt;/li&gt;&#xA;&lt;li&gt;其他线程等待或返回旧值&lt;/li&gt;&#xA;&lt;li&gt;示例伪代码：&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;getData&lt;/span&gt;(String key) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    String value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; redis.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(key);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (value &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (lock.&lt;span style=&#34;color:#a6e22e&#34;&gt;tryLock&lt;/span&gt;()) { &lt;span style=&#34;color:#75715e&#34;&gt;// 获取分布式锁&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;// 再次检查，防止其他线程已经更新&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; redis.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(key);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (value &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; db.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(key);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    redis.&lt;span style=&#34;color:#a6e22e&#34;&gt;setex&lt;/span&gt;(key, 300, value);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                lock.&lt;span style=&#34;color:#a6e22e&#34;&gt;unlock&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// 未获取到锁，等待或返回默认值&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            Thread.&lt;span style=&#34;color:#a6e22e&#34;&gt;sleep&lt;/span&gt;(100);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; getData(key); &lt;span style=&#34;color:#75715e&#34;&gt;// 重试&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; value;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;熔断降级机制&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>同一个类下，调用方法，采用AopContext方式，解决Spring注解失效</title>
      <link>https://nexiuss.github.io/posts/%E5%90%8C%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%B8%8B%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95%E9%87%87%E7%94%A8aopcontext%E6%96%B9%E5%BC%8F%E8%A7%A3%E5%86%B3spring%E6%B3%A8%E8%A7%A3%E5%A4%B1%E6%95%88/</link>
      <pubDate>Tue, 29 Apr 2025 10:41:12 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/%E5%90%8C%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%B8%8B%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95%E9%87%87%E7%94%A8aopcontext%E6%96%B9%E5%BC%8F%E8%A7%A3%E5%86%B3spring%E6%B3%A8%E8%A7%A3%E5%A4%B1%E6%95%88/</guid>
      <description>&lt;h1 id=&#34;同一个类下调用方法采用aopcontext方式解决spring注解失效&#34;&gt;同一个类下，调用方法，采用AopContext方式，解决Spring注解失效&lt;/h1&gt;&#xA;&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;&#xA;&lt;p&gt;在Spring框架中，当一个类中的方法调用另一个方法时，如果被调用的方法使用了Spring注解（如@Transactional），则注解可能不会生效。这是因为Spring的AOP代理机制只对外部调用有效，内部调用不会触发AOP代理。&lt;/p&gt;&#xA;&lt;h2 id=&#34;解决方法&#34;&gt;解决方法&lt;/h2&gt;&#xA;&lt;p&gt;使用AopContext来获取当前线程的AOP代理对象，然后通过该对象调用被注解的方法。这样可以确保注解生效。&lt;/p&gt;&#xA;&lt;p&gt;示例：@Transaction 注解的方法，在方法内部调用的话，如果是直接调用，那么事务不会生效。需要通过AopContext获取代理对象，然后调用被注解的方法。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@Transactional&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;transactionTask&lt;/span&gt;(String keyword) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    doSth();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//反例&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;test&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    transactionTask(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;test&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//正例&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;test2&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    (当前类名)(AopContext.&lt;span style=&#34;color:#a6e22e&#34;&gt;currentProxy&lt;/span&gt;()).&lt;span style=&#34;color:#a6e22e&#34;&gt;transactionTask&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;test2&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;配置要求&#34;&gt;配置要求&lt;/h2&gt;&#xA;&lt;p&gt;为了使 AopContext.currentProxy() 正常工作，需要在 Spring 的配置中启用 AOP 代理的暴露。这通常通过在配置类上添加 @EnableAspectJAutoProxy(exposeProxy = true) 注解来实现&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@Configuration&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@EnableAspectJAutoProxy&lt;/span&gt;(exposeProxy &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SpringConfiguration&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 其他配置代码&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;注意事项&#34;&gt;注意事项&lt;/h2&gt;&#xA;&lt;p&gt;虽然 AopContext.currentProxy() 提供了一种在同一个类中保持 AOP 增强有效的方法，但它并不是没有代价的。这种方法使用了 ThreadLocal 来存储代理对象，可能会对性能产生影响。因此，在使用时应当权衡利弊，并考虑是否有更好的设计方案，如将需要增强的方法放在不同的类中。&lt;/p&gt;&#xA;&lt;h2 id=&#34;其他解决方案&#34;&gt;其他解决方案&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;将被调用的方法放到另一个类中：这样，调用时会通过 Spring 的代理机制，保证 AOP 增强的执行。&lt;/li&gt;&#xA;&lt;li&gt;使用 Spring 上下文获取代理对象：可以通过 ApplicationContext.getBean() 方法获取需要的代理对象，然后进行方法调用。&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>GIMP 克隆</title>
      <link>https://nexiuss.github.io/posts/gimp-%E5%85%8B%E9%9A%86/</link>
      <pubDate>Mon, 03 Mar 2025 11:14:23 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/gimp-%E5%85%8B%E9%9A%86/</guid>
      <description>&lt;h1 id=&#34;gimp-克隆&#34;&gt;GIMP 克隆&lt;/h1&gt;&#xA;&lt;h1 id=&#34;克隆工具的基本操作步骤&#34;&gt;克隆工具的基本操作步骤&lt;/h1&gt;&#xA;&lt;h3 id=&#34;1-打开图片并选择克隆工具&#34;&gt;1. 打开图片并选择克隆工具&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;打开需要编辑的图片。&lt;/li&gt;&#xA;&lt;li&gt;在左侧工具栏中找到 克隆工具（图标类似橡皮图章，或按快捷键 C）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;2-设置克隆源点&#34;&gt;2. 设置克隆源点&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;按住 Command 键（⌘），同时用鼠标点击图片中想要复制的区域（即克隆源点）。此时光标会变成十字准星，表示已取样。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;3-adjust画笔属性&#34;&gt;3. Adjust画笔属性&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;右键点击画布，打开画笔选项。&lt;/li&gt;&#xA;&lt;li&gt;调整以下属性：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;大小&lt;/strong&gt;：拖动滑块或使用 [ 和 ] 键快速缩放。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;硬度&lt;/strong&gt;：硬度越低，边缘越柔和。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;不透明度/流量&lt;/strong&gt;：控制克隆效果的透明度。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;4-开始克隆&#34;&gt;4. 开始克隆&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;松开 Command 键，在目标区域按住鼠标左键涂抹，源点的内容会复制到涂抹处。&lt;/li&gt;&#xA;&lt;li&gt;提示：保持鼠标移动与源点同步，避免错位。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意事项&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;如果原图是来自非 jpg 或 png 图片，那么需要新建一个图层做涂抹动作，否则将不能生效（设置克隆源点应该在原图层）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;5-高级设置可选&#34;&gt;5. 高级设置（可选）&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;对齐模式：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;无对齐：每次松开鼠标后重新从源点开始。&lt;/li&gt;&#xA;&lt;li&gt;对齐：保持源点与涂抹位置的相对距离（适合连续修复）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;源类型：在工具选项中可切换为“图案”而非图片内容。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>解决国密org.bouncycastle依赖冲突</title>
      <link>https://nexiuss.github.io/posts/%E8%A7%A3%E5%86%B3%E5%9B%BD%E5%AF%86org.bouncycastle%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81/</link>
      <pubDate>Thu, 23 Jan 2025 09:29:10 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/%E8%A7%A3%E5%86%B3%E5%9B%BD%E5%AF%86org.bouncycastle%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81/</guid>
      <description>&lt;h1 id=&#34;解决bouncycastle依赖冲突的两种方案&#34;&gt;&lt;strong&gt;解决BouncyCastle依赖冲突的两种方案&lt;/strong&gt;&lt;/h1&gt;&#xA;&lt;p&gt;背景：本地项目使用的 BouncyCastle 1.61 版本，但第三方 SDK 要求使用 1.70 版本，导致 jar 包冲突的问题。&lt;/p&gt;&#xA;&lt;h3 id=&#34;方案一使用shade插件实现隔离&#34;&gt;方案一：使用Shade插件实现隔离&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;首先建立一个工具工程引入需要shade jar 包&lt;/li&gt;&#xA;&lt;li&gt;配置 maven-shade插件，通过 pattern shadedPattern属性来配置要更改的包的名字&lt;/li&gt;&#xA;&lt;li&gt;使用shade 后的jar包，import 更改后的包名字，若有反射调用，也反射更改后的包名字&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h4 id=&#34;pom文件配置插件&#34;&gt;pom文件配置插件&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-shade-plugin&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.2.4&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;package&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;shade&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- 将org.bouncycastle包的类重定位到shaded.org.bouncycastle --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;relocations&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;relocation&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;pattern&amp;gt;&lt;/span&gt;org.bouncycastle&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/pattern&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;shadedPattern&amp;gt;&lt;/span&gt;shaded.org.bouncycastle&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/shadedPattern&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/relocation&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/relocations&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- 排除一些元数据文件 --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filters&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;artifact&amp;gt;&lt;/span&gt;*:*&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/artifact&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;excludes&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;exclude&amp;gt;&lt;/span&gt;META-INF/*.SF&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/exclude&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;exclude&amp;gt;&lt;/span&gt;META-INF/*.DSA&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/exclude&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;exclude&amp;gt;&lt;/span&gt;META-INF/*.RSA&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/exclude&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;exclude&amp;gt;&lt;/span&gt;sdk.configure.properties&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/exclude&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/excludes&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filter&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filters&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;不希望打入项目的包可以scope配置为provided&#34;&gt;不希望打入项目的包可以scope配置为provided&lt;/h4&gt;&#xA;&lt;h4 id=&#34;项目打包完成后可以使用带有shaded-bouncycastle的jar包&#34;&gt;项目打包完成后，可以使用带有Shaded BouncyCastle的jar包&lt;/h4&gt;&#xA;&lt;h4 id=&#34;补充此方案由于是修改了jar包的若使用-oracle-jdk-启动应用会导致出现以下错误&#34;&gt;&lt;strong&gt;补充&lt;/strong&gt;：此方案由于是修改了jar包的，若使用 oracle-jdk 启动应用，会导致出现以下错误：&lt;/h4&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Caused by: java.io.IOException: error constructing MAC: java.lang.SecurityException: JCE cannot authenticate the provider BC&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;主要原因为：OracleJDK验证了加密签名，而打包的过程破坏了验证BC库的签名&#xA;解决方式为：使用非 oracle jdk，如 open jdk&lt;/p&gt;</description>
    </item>
    <item>
      <title>MAC禁止或启用生成.DS_Strore文件</title>
      <link>https://nexiuss.github.io/posts/mac%E7%A6%81%E6%AD%A2%E6%88%96%E5%90%AF%E7%94%A8%E7%94%9F%E6%88%90.ds_strore%E6%96%87%E4%BB%B6/</link>
      <pubDate>Wed, 08 Jan 2025 10:47:57 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/mac%E7%A6%81%E6%AD%A2%E6%88%96%E5%90%AF%E7%94%A8%E7%94%9F%E6%88%90.ds_strore%E6%96%87%E4%BB%B6/</guid>
      <description>&lt;h1 id=&#34;删除和控制-macos-上-finder-创建的-ds_store-文件&#34;&gt;&lt;strong&gt;删除和控制 macOS 上 Finder 创建的 .DS_Store 文件&lt;/strong&gt;&lt;/h1&gt;&#xA;&lt;p&gt;Finder 会为每个文件夹创建 &lt;code&gt;.DS_Store&lt;/code&gt; 文件来存储显示属性，如文件图标位置、排列方式等。在分享或上传文件时，通常需要手动删除这些文件，以避免与他人共享的副本出现不同的显示配置问题。&lt;/p&gt;&#xA;&lt;h2 id=&#34;命令&#34;&gt;&lt;strong&gt;命令&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1-删除当前目录及其子目录下-ds_store-文件&#34;&gt;1. 删除当前目录及其子目录下 .DS_Store 文件&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo find ./ -name &amp;#34;.DS_Store&amp;#34; -depth -exec rm {} \;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-设置不再创建-ds_store-文件永久生效后重启-mac-才能有效果&#34;&gt;2. 设置不再创建 .DS_Store 文件（永久生效后重启 mac 才能有效果）&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;3-恢复默认行为&#34;&gt;3. 恢复默认行为&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;defaults delete com.apple.desktopservices DSDontWriteNetworkStores&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;macos-新版本中提供的脚本&#34;&gt;&lt;strong&gt;macOS 新版本中提供的脚本&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;p&gt;macOS 新版本中提供了一个专门的脚本来处理这一问题。该脚本名为 &lt;code&gt;dot_clean&lt;/code&gt;。&lt;/p&gt;&#xA;&lt;h3 id=&#34;使用-dot_clean-脚本删除-ds_store-文件&#34;&gt;使用 dot_clean 脚本删除 .DS_Store 文件&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/usr/sbin/dot_clean -m &amp;#39;目录名&amp;#39;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;支持针对特定目录设置不再创建此类文件的规则。&lt;/p&gt;&#xA;&lt;h2 id=&#34;注意&#34;&gt;&lt;strong&gt;注意&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;在使用这些命令之前，请确保已经进入要操作的目录。&lt;/li&gt;&#xA;&lt;li&gt;请务必小心地执行这些命令，以免意外删除重要数据。&lt;/li&gt;&#xA;&lt;li&gt;如果您使用 &lt;code&gt;dot_clean&lt;/code&gt; 脚本，需要在 macOS Catalina 或更高版本下才能生效。&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>Java启动jar包加载lib</title>
      <link>https://nexiuss.github.io/posts/java%E5%90%AF%E5%8A%A8jar%E5%8C%85%E5%8A%A0%E8%BD%BDlib/</link>
      <pubDate>Sat, 07 Dec 2024 11:21:14 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/java%E5%90%AF%E5%8A%A8jar%E5%8C%85%E5%8A%A0%E8%BD%BDlib/</guid>
      <description>&lt;h1 id=&#34;java启动jar包加载lib&#34;&gt;Java启动jar包加载lib&lt;/h1&gt;&#xA;&lt;h2 id=&#34;示例&#34;&gt;示例&lt;/h2&gt;&#xA;&lt;p&gt;windows&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;@echo off&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;java -cp &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lib/*;myapp.jar&amp;#34;&lt;/span&gt; com.example.MainClass&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;linux&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/bin/bash&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;java -cp &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lib/*:myapp.jar&amp;#34;&lt;/span&gt; com.example.MainClass&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;-cp参数的作用&#xA;在Java中，-cp（或&amp;ndash;classpath）参数用于指定Java程序运行时需要查找类和包的路径。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;基本用法：&#xA;&lt;code&gt;java -cp &amp;lt;class_path&amp;gt; &amp;lt;main_class&amp;gt; [args...]&lt;/code&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&amp;lt;class_path&amp;gt;：用冒号（在Unix/Linux/macOS上）或分号（在Windows上）分隔的类路径列表。&lt;/li&gt;&#xA;&lt;li&gt;&amp;lt;main_class&amp;gt;：包含main方法的Java类的全限定名（包括包名）。&lt;/li&gt;&#xA;&lt;li&gt;[args&amp;hellip;]：传递给main方法的参数。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;ol start=&#34;3&#34;&gt;&#xA;&lt;li&gt;如何指定多个类路径&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Unix/Linux/macOS&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;java -cp /path/to/lib1:/path/to/lib2:/path/to/classes MyApp&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Windows&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;java -cp C:&lt;span style=&#34;color:#ae81ff&#34;&gt;\p&lt;/span&gt;ath&lt;span style=&#34;color:#ae81ff&#34;&gt;\t&lt;/span&gt;o&lt;span style=&#34;color:#ae81ff&#34;&gt;\l&lt;/span&gt;ib1;C:&lt;span style=&#34;color:#ae81ff&#34;&gt;\p&lt;/span&gt;ath&lt;span style=&#34;color:#ae81ff&#34;&gt;\t&lt;/span&gt;o&lt;span style=&#34;color:#ae81ff&#34;&gt;\l&lt;/span&gt;ib2;C:&lt;span style=&#34;color:#ae81ff&#34;&gt;\p&lt;/span&gt;ath&lt;span style=&#34;color:#ae81ff&#34;&gt;\t&lt;/span&gt;o&lt;span style=&#34;color:#ae81ff&#34;&gt;\c&lt;/span&gt;lasses MyApp&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;&#xA;&lt;li&gt;当类路径中包含空格时应如何处理&#xA;如果类路径中包含空格，你需要将整个路径用引号括起来，以确保空格被正确处理。例如：&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Unix/Linux/macOS&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;java -cp &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/path/to/some directory with spaces/lib.jar:/other/path/classes&amp;#34;&lt;/span&gt; MyApp&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Windows&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;java -cp &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\Program Files\Java\lib\mylib.jar;C:\other path\classes&amp;#34;&lt;/span&gt; MyApp&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>使用timeStamp查询date格式的数据库字段索引失效</title>
      <link>https://nexiuss.github.io/posts/%E4%BD%BF%E7%94%A8timestamp%E6%9F%A5%E8%AF%A2date%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E6%AE%B5%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/</link>
      <pubDate>Fri, 22 Nov 2024 14:49:08 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/%E4%BD%BF%E7%94%A8timestamp%E6%9F%A5%E8%AF%A2date%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E6%AE%B5%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/</guid>
      <description>&lt;h1 id=&#34;使用timestamp查询date格式的数据库字段索引失效&#34;&gt;使用timeStamp查询date格式的数据库字段索引失效&lt;/h1&gt;&#xA;&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;&#xA;&lt;p&gt;一次大表查询的过程中，为防止数据量太大，使用了timestamp作为查询条件来过滤一个数据库类型为date的字段,如下图所示：&#xA;&lt;code&gt;select * from t_xxx t where t.transdate&amp;gt;=timestamp &#39;2024-11-22 00:00:00&#39; and t.transdate&amp;lt;=timestamp &#39;2024-11-22 59:59:59&#39;&lt;/code&gt;&#xA;此处transdate在数据库数据类型为date类型&#xA;发现搜索时间比较长，通过explain plan 发现是transdate过滤的时候，走了全表查询&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-table&#34; data-lang=&#34;table&#34;&gt;------------------------------------------------------------------------------------------------&#xA;| Id  | Operation                | Name                | Rows  | Bytes | Cost (%CPU)| Time     |&#xA;------------------------------------------------------------------------------------------------&#xA;|*  5 |      TABLE ACCESS FULL   | S3_ACCOUNTSTATEMENT |    42 |  2562 |  1060   (1)| 00:00:01 |&#xA;------------------------------------------------------------------------------------------------&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;原因&#34;&gt;原因&lt;/h2&gt;&#xA;&lt;p&gt;通过分析发现当使用&#xA;&lt;code&gt;select * from t_xxx t where t.transdate&amp;gt;=to_date(yyyy-MM-dd HH:mm:ss,&#39;2024-11-22 00:00:00&#39;)and t.transdate&amp;lt;=to_date(yyyy-MM-dd HH:mm:ss,&#39;2024-11-22 59:59:59&#39;)&lt;/code&gt;&#xA;性能明显提升，命中的索引，通过分析得知：transdate字段类型是Date，不支持对 timestamp值进行精确匹配，故索引失效&lt;/p&gt;</description>
    </item>
    <item>
      <title>事务工具类</title>
      <link>https://nexiuss.github.io/posts/%E4%BA%8B%E5%8A%A1%E5%B7%A5%E5%85%B7%E7%B1%BB/</link>
      <pubDate>Thu, 21 Nov 2024 10:51:56 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/%E4%BA%8B%E5%8A%A1%E5%B7%A5%E5%85%B7%E7%B1%BB/</guid>
      <description>&lt;h1 id=&#34;事务工具类&#34;&gt;事务工具类&lt;/h1&gt;&#xA;&lt;p&gt;TransactionManager.java&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TransactionManager&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Logger logger &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; LoggerFactory.&lt;span style=&#34;color:#a6e22e&#34;&gt;getLogger&lt;/span&gt;(TransactionManager.&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/** 是否开启了事务 **/&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; ThreadLocal&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;Boolean&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; open &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ThreadLocal();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/** 使用ThreadLocal来存储每个线程的嵌套层次 **/&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; ThreadLocal&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;Integer&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; transactionLevelHolder &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ThreadLocal.&lt;span style=&#34;color:#a6e22e&#34;&gt;withInitial&lt;/span&gt;(() &lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt; 0);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/**&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * 数据库连接ThreadLocal&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * 当某个线程第一次调用 getConnection 方法时，如果该线程还没有为 connectionHolder 设置值，&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * 那么 withInitial 提供的初始化方法会被调用，创建一个新的数据库连接并返回。&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * 这样，每个线程都有自己独立的数据库连接，确保线程安全和事务管理的独立性&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     */&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; ThreadLocal&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;Connection&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; connectionHolder &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ThreadLocal.&lt;span style=&#34;color:#a6e22e&#34;&gt;withInitial&lt;/span&gt;(() &lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Connection connection;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (FGBiz.&lt;span style=&#34;color:#a6e22e&#34;&gt;dspCenter&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;dbConnectionSet&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RuntimeException(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;获取数据库连接失败&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; begin &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; System.&lt;span style=&#34;color:#a6e22e&#34;&gt;currentTimeMillis&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            connection &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ConnSet.&lt;span style=&#34;color:#a6e22e&#34;&gt;getDataSource&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;getConnection&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            logger.&lt;span style=&#34;color:#a6e22e&#34;&gt;info&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;获取数据库连接耗时：{} ms&amp;#34;&lt;/span&gt;,System.&lt;span style=&#34;color:#a6e22e&#34;&gt;currentTimeMillis&lt;/span&gt;()&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;begin);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (Exception e) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RuntimeException(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;获取数据库连接失败&amp;#34;&lt;/span&gt;, e);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;setAutoCommit&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;); &lt;span style=&#34;color:#75715e&#34;&gt;// 关闭自动提交，开启事务管理&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; createProxyConnection(connection);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (SQLException e) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RuntimeException(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;关闭自动提交，开启事务管理失败&amp;#34;&lt;/span&gt;, e);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// 开始事务&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;beginTransaction&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; 0) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            getConnection(); &lt;span style=&#34;color:#75715e&#34;&gt;// 确保连接已创建并设置为非自动提交&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;set&lt;/span&gt;(transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 1);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Connection &lt;span style=&#34;color:#a6e22e&#34;&gt;getConnection&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        open .&lt;span style=&#34;color:#a6e22e&#34;&gt;set&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; connectionHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// 提交事务&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;commit&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; 1) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            Connection connection &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; connectionHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (connection &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;isClosed&lt;/span&gt;()) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;commit&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (SQLException e) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                logger.&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;commit失败，失败原因：&amp;#34;&lt;/span&gt;,e);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;set&lt;/span&gt;(0);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; 1) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;set&lt;/span&gt;(transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; 1);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// 回滚事务&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rollback&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (transactionLevel &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; 0) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            Connection connection &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; connectionHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (connection &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;isClosed&lt;/span&gt;()) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;rollback&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (SQLException e) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                logger.&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rollback失败，失败原因：&amp;#34;&lt;/span&gt;,e);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;set&lt;/span&gt;(0);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/**&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * 注意：务必在final里关闭连接&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * 关闭连接，并清理ThreadLocal&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     */&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;close&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Connection connection &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; connectionHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (connection &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;isClosed&lt;/span&gt;()) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(connection &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Proxy){&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    ((ConnectionProxy) Proxy.&lt;span style=&#34;color:#a6e22e&#34;&gt;getInvocationHandler&lt;/span&gt;(connection)).&lt;span style=&#34;color:#a6e22e&#34;&gt;reallyClose&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }&lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;close&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (SQLException e) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            e.&lt;span style=&#34;color:#a6e22e&#34;&gt;printStackTrace&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            connectionHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;remove&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            open.&lt;span style=&#34;color:#a6e22e&#34;&gt;remove&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            transactionLevelHolder.&lt;span style=&#34;color:#a6e22e&#34;&gt;remove&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;//是否开启了事务&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;boolean&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;isOpen&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; open.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; open.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// 创建代理连接的方法&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Connection &lt;span style=&#34;color:#a6e22e&#34;&gt;createProxyConnection&lt;/span&gt;(Connection originalConnection) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (Connection) Proxy.&lt;span style=&#34;color:#a6e22e&#34;&gt;newProxyInstance&lt;/span&gt;(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                Thread.&lt;span style=&#34;color:#a6e22e&#34;&gt;currentThread&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;getContextClassLoader&lt;/span&gt;(),&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Class&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;?&amp;gt;[]&lt;/span&gt;{Connection.&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ConnectionProxy(originalConnection)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        );&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// 代理类&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ConnectionProxy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;implements&lt;/span&gt; InvocationHandler {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; Connection originalConnection;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;boolean&lt;/span&gt; isClosed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ConnectionProxy&lt;/span&gt;(Connection originalConnection) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;originalConnection&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; originalConnection;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;@Override&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; Object &lt;span style=&#34;color:#a6e22e&#34;&gt;invoke&lt;/span&gt;(Object proxy, Method method, Object&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args) &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; Throwable {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;close&amp;#34;&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;equals&lt;/span&gt;(method.&lt;span style=&#34;color:#a6e22e&#34;&gt;getName&lt;/span&gt;())) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;// 拦截 close 方法，不执行关闭操作&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                isClosed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                logger.&lt;span style=&#34;color:#a6e22e&#34;&gt;info&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;事务未结束，暂不关闭连接&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// 其他方法调用原始连接的方法&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; method.&lt;span style=&#34;color:#a6e22e&#34;&gt;invoke&lt;/span&gt;(originalConnection, args);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// 真正关闭连接的方法&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;reallyClose&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; SQLException {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            logger.&lt;span style=&#34;color:#a6e22e&#34;&gt;info&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;事务结束，关闭连接&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            originalConnection.&lt;span style=&#34;color:#a6e22e&#34;&gt;close&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;TransactionUtil.java&lt;/p&gt;</description>
    </item>
    <item>
      <title>Tomcat配置druid</title>
      <link>https://nexiuss.github.io/posts/tomcat%E9%85%8D%E7%BD%AEdruid/</link>
      <pubDate>Wed, 13 Nov 2024 13:26:17 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/tomcat%E9%85%8D%E7%BD%AEdruid/</guid>
      <description>&lt;h1 id=&#34;tomcat配置druid&#34;&gt;Tomcat配置druid&lt;/h1&gt;&#xA;&lt;h2 id=&#34;流程概述&#34;&gt;流程概述&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;在/home/tomcat/apache-tomcat-8.5.31/lib目录&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;删除tomcat-dbcp.jar&lt;/li&gt;&#xA;&lt;li&gt;追加druid-1.1.9.jar&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;ol start=&#34;2&#34;&gt;&#xA;&lt;li&gt;改Tomcat web.xml配置&lt;/li&gt;&#xA;&lt;li&gt;改Tomcat context.xml配置&lt;/li&gt;&#xA;&lt;li&gt;检查项目中是否有权限拦截的，需要放开拦截，改项目的web.xml&lt;/li&gt;&#xA;&lt;li&gt;如果druid没加载上，再改catalina.properties&lt;/li&gt;&#xA;&lt;li&gt;验证地址： {ip}:{host}/{project_name}/druid/login.html&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;修改tomcat下的webxml里面增加druid配置&#34;&gt;修改tomcat下的web.xml，里面增加druid配置&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- druid view --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;servlet&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;DruidStatView&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;servlet-class&amp;gt;&lt;/span&gt;com.alibaba.druid.support.http.StatViewServlet&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/servlet-class&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- 允许清空统计数据 --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;resetEnable&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;true&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- 用户名 --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;loginUsername&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;admin&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- 密码 --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;loginPassword&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;admin&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/servlet&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;DruidStatView&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/druid/*&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/url-pattern&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- druid view --&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- 连接池 启用 Web 监控统计功能    start--&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter-name&amp;gt;&lt;/span&gt;DruidWebStatFilter&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filter-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter-class&amp;gt;&lt;/span&gt;com.alibaba.druid.support.http.WebStatFilter&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filter-class&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;exclusions&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;*.js ,*.gif ,*.jpg ,*.png ,*.css ,*.ico ,*.map,/druid/*&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;sessionStatMaxCount&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;2000&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;sessionStatEnable&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;true&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;principalSessionName&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;session_user_key&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;profileEnable&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;true&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filter&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter-mapping&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter-name&amp;gt;&lt;/span&gt;DruidWebStatFilter&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filter-name&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/*&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/url-pattern&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/filter-mapping&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!-- 连接池 启用 Web 监控统计功能   end--&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;contextxml配置&#34;&gt;context.xml配置&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Resource&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;name=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;prpDataSource&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;auth=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Container&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;type=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;javax.sql.DataSource&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;factory=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;com.alibaba.druid.pool.DruidDataSourceFactory&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;defaultTransactionIsolation=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;READ_COMMITTED&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;username=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;用户名&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;password=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;密码&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;filters=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;stat,wall&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;driverClassName=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;oracle.jdbc.OracleDriver&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;url=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jdbc:oracle:thin:@ip:端口:service&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;maxActive=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;96&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;minIdle=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;8&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;removeabandoned=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;removeabandonedtimeout=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;60&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#a6e22e&#34;&gt;logabandoned=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/Resource&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;如果druid没加载上再改catalinaproperties&#34;&gt;如果druid没加载上，再改catalina.properties&lt;/h2&gt;&#xA;&lt;p&gt;增加：druid-1.1.9.jar&lt;/p&gt;</description>
    </item>
    <item>
      <title>Vue3中hooks函数封装和使用</title>
      <link>https://nexiuss.github.io/posts/vue3%E4%B8%ADhooks%E5%87%BD%E6%95%B0%E5%B0%81%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Sat, 12 Oct 2024 15:02:26 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/vue3%E4%B8%ADhooks%E5%87%BD%E6%95%B0%E5%B0%81%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</guid>
      <description>&lt;h1 id=&#34;vue3中hooks函数封装和使用&#34;&gt;Vue3中hooks函数封装和使用&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/661652964&#34;&gt;摘抄自：知乎&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;一hooks-是什么&#34;&gt;一、hooks 是什么&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;vue3 中的 hooks 就是函数的一种写法，就是将文件的一些单独功能的 js 代码进行抽离出来进行封装使用。&lt;/li&gt;&#xA;&lt;li&gt;它的主要作用是 Vue3 借鉴了 React 的一种机制，用于在函数组件中共享状态逻辑和副作用，从而实现代码的可复用性。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意:&lt;/strong&gt; 其实 hooks 和 vue2 中的 mixin 有点类似，但是相对 mixins 而言， hooks 更清楚复用功能代码的来源, 更清晰易懂。&lt;/p&gt;&#xA;&lt;h2 id=&#34;二hooks-的优点&#34;&gt;二、hooks 的优点&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;hooks 作为独立逻辑的组件封装，其内部的属性、函数等和外部组件具有响应式依附的作用。&lt;/li&gt;&#xA;&lt;li&gt;自定义 hook 的作用类似于 vue2 中的 mixin 技术，使用方便，易于上手。&lt;/li&gt;&#xA;&lt;li&gt;使用 Vue3 的组合 API 封装的可复用，高内聚低耦合。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;三自定义-hook-需要满足的规范&#34;&gt;三、自定义 hook 需要满足的规范&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;具备可复用功能，才需要抽离为 hooks 独立文件;&lt;/li&gt;&#xA;&lt;li&gt;函数名/文件名以 use 开头，形如: useXX;&lt;/li&gt;&#xA;&lt;li&gt;引用时将响应式变量或者方法显式解构暴露出来；&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;示例如下：&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;const{ nameRef, Fn } = useXX()&lt;/code&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;四hooks-和-utils-区别&#34;&gt;四、hooks 和 utils 区别&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;相同点：&lt;/strong&gt;&#xA;通过 hooks 和 utils 函数封装， 可以实现组件间共享和复用，提高代码的可重用性和可维护性。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;异同点：&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;表现形式不同：&lt;/strong&gt; hooks 是在 utils 的基础上再包一层组件级别的东西(钩子函数等)；utils 一般用于封装相应的逻辑函数，没有组件的东西；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据是否具有响应式：&lt;/strong&gt; hooks 中如果涉及到 ref，reactive，computed 这些 api 的数据，是具有响应式的；而 utils 只是单纯提取公共方法就不具备响应式；&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;作用范围不同：&lt;/strong&gt; hooks 封装，可以将组件的状态和生命周期方法提取出来，并在多个组件之间共享和重用；utils 通常是指一些辅助函数或工具方法，用于实现一些常见的操作或提供特定功能。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;总结：&lt;/strong&gt;&#xA;utils 是通用的工具函数，而 hooks 是对 utils 的一种封装，用于在组件中共享状态逻辑和副作用。&#xA;通过使用 hooks，您可以简化代码，并使其更具可读性和可维护性。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;五hooks-和-mixin-区别&#34;&gt;五、hooks 和 mixin 区别&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;相同点：&lt;/strong&gt;&#xA;hooks 和 mixin，都是常用代码逻辑抽离手段，方便进行代码复用；&lt;/p&gt;</description>
    </item>
    <item>
      <title>Kotlin lambda表达式</title>
      <link>https://nexiuss.github.io/posts/kotlin%E4%B8%ADlambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/</link>
      <pubDate>Fri, 11 Oct 2024 15:39:32 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/kotlin%E4%B8%ADlambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/</guid>
      <description>&lt;h1 id=&#34;kotlin-lambda表达式&#34;&gt;Kotlin lambda表达式&lt;/h1&gt;&#xA;&lt;h2 id=&#34;lambda-表达式语法&#34;&gt;“Lambda 表达式语法”&lt;/h2&gt;&#xA;&lt;p&gt;Lambda 表达式的完整语法形式如下：&#xA;&lt;code&gt;val sum: (Int, Int) -&amp;gt; Int = { x: Int, y: Int -&amp;gt; x + y }&lt;/code&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;lambda 表达式总是括在花括号中。&lt;/li&gt;&#xA;&lt;li&gt;完整语法形式的参数声明放在花括号内，并有可选的类型标注。&lt;/li&gt;&#xA;&lt;li&gt;函数体跟在一个 -&amp;gt; 之后。&lt;/li&gt;&#xA;&lt;li&gt;如果推断出的该 lambda 的返回类型不是 Unit，那么该 lambda 主体中的最后一个（或可能是单个）表达式会视为返回值。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;如果将所有可选标注都留下，看起来如下：&#xA;&lt;code&gt;val sum = { x: Int, y: Int -&amp;gt; x + y }&lt;/code&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;传递末尾的-lambda-表达式&#34;&gt;“传递末尾的 lambda 表达式”&lt;/h2&gt;&#xA;&lt;p&gt;按照 Kotlin 惯例，如果函数的最后一个参数是函数，那么作为相应参数传入的 lambda&#xA;表达式可以放在圆括号之外：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-kt&#34; data-lang=&#34;kt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 完整代码&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;items.fold(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        acc, e &lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt; acc * e&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;val product = items.fold(1) { acc, e -&amp;gt; acc * e }&lt;/code&gt;&#xA;这种语法也称为拖尾 lambda 表达式。&#xA;如果该 lambda 表达式是调用时唯一的参数，那么圆括号可以完全省略：&lt;/p&gt;</description>
    </item>
    <item>
      <title>@NacosValue和@Value的区别</title>
      <link>https://nexiuss.github.io/posts/@nacosvalue%E5%92%8C@value%E7%9A%84%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Wed, 18 Sep 2024 17:14:31 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/@nacosvalue%E5%92%8C@value%E7%9A%84%E5%8C%BA%E5%88%AB/</guid>
      <description>&lt;h1 id=&#34;nacosvalue-和value的区别&#34;&gt;@NacosValue 和@Value的区别&lt;/h1&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;这两个注解都可以用于获取配置属性的值，但在使用方式和适用场景上有一些异同之处。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;相同点&#34;&gt;相同点：&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;两者都可以将配置属性的值注入到类的字段或方法参数中。&lt;/li&gt;&#xA;&lt;li&gt;都支持 Spring 表达式语言（SpEL）来引用其他属性或进行运算。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;不同点&#34;&gt;不同点：&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;来源：@Value 注解是 Spring 框架提供的注解，可用于读取各种配置文件（如 properties、yml 等），而 @NacosValue 注解是 Alibaba Nacos 提供的注解，专门用于从 Nacos 配置中心获取属性值。&lt;/li&gt;&#xA;&lt;li&gt;动态刷新：@Value 注解默认情况下不支持动态刷新，即配置变化后不会自动重新注入新值，而 @NacosValue 注解通过设置 autoRefreshed = true 可以实现配置动态刷新，当 Nacos 配置发生变化时，自动更新对应的属性值。&lt;/li&gt;&#xA;&lt;li&gt;配置优先级：对于相同属性名的配置，@NacosValue 注解优先级高于 @Value 注解。也就是说，如果同时在 Nacos 和其他配置文件（如 bootstrap.properties、application.properties）中存在相同属性名的配置，那么 @NacosValue 注解获取的是 Nacos 中的属性值。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;根据具体的需求，选择合适的注解来获取配置属性的值。如果你使用 Nacos 作为配置中心并希望实现动态刷新，可以选择 @NacosValue 注解；如果要读取其他类型的配置文件或不需要动态刷新，可以选择 @Value 注解。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Docker启动</title>
      <link>https://nexiuss.github.io/posts/docker%E5%90%AF%E5%8A%A8/</link>
      <pubDate>Thu, 12 Sep 2024 13:07:27 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/docker%E5%90%AF%E5%8A%A8/</guid>
      <description>&lt;h1 id=&#34;docker启动&#34;&gt;Docker启动&lt;/h1&gt;&#xA;&lt;h3 id=&#34;engine配置&#34;&gt;engine配置&lt;/h3&gt;&#xA;&lt;h4 id=&#34;初始配置&#34;&gt;初始配置&lt;/h4&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{&#xA;  &amp;#34;builder&amp;#34;: {&#xA;    &amp;#34;gc&amp;#34;: {&#xA;      &amp;#34;defaultKeepStorage&amp;#34;: &amp;#34;20GB&amp;#34;,&#xA;      &amp;#34;enabled&amp;#34;: true&#xA;    }&#xA;  },&#xA;  &amp;#34;experimental&amp;#34;: false,&#xA;  &amp;#34;features&amp;#34;: {&#xA;    &amp;#34;buildkit&amp;#34;: true&#xA;  }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;配置&#34;&gt;配置&lt;/h4&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{&#xA;  &amp;#34;experimental&amp;#34;: true,&#xA;  &amp;#34;debug&amp;#34;: true,&#xA;  &amp;#34;registry-mirrors&amp;#34;: [&amp;#34;http://hub-mirror.c.163.com&amp;#34;]&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;reids&#34;&gt;reids&lt;/h3&gt;&#xA;&lt;p&gt;&lt;code&gt;docker run -it -d --name redis -p 6379:6379 redis --bind 0.0.0.0 --protected-mode no &lt;/code&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;rabbitmq&#34;&gt;rabbitmq&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;创建卷&#xA;&lt;code&gt;docker volume create rabbitmq-home&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;运行&#xA;&lt;code&gt;docker run -id --name=rabbitmq -v rabbitmq-home:/var/lib/rabbitmq -p 15672:15672 -p 5672:5672 -e RABBITMQ_DEFAULT_USER=swsk33 -e RABBITMQ_DEFAULT_PASS=123456 rabbitmq:management &lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;rocketmq&#34;&gt;rocketmq&lt;/h3&gt;&#xA;&lt;p&gt;拉镜像&#xA;&lt;code&gt;docker pull rocketmqinc/rocketmq&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Tomcat容器部署</title>
      <link>https://nexiuss.github.io/posts/tomcat%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2/</link>
      <pubDate>Wed, 11 Sep 2024 18:12:56 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/tomcat%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2/</guid>
      <description>&lt;h1 id=&#34;tomcat容器部署&#34;&gt;Tomcat容器部署&lt;/h1&gt;&#xA;&lt;p&gt;以下是基于Tomcat 8的一个例子：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 基础镜像为 Tomcat 8&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; tomcat:8&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 环境变量设置&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;ENV&lt;/span&gt; CATALINA_BASE /usr/local/catalina&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;ENV&lt;/span&gt; CATALINA_HOME /usr/local/tomcat&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 复制 WAR 包到 webapps 目录&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;COPY&lt;/span&gt; front.war /usr/local/catalina/webapps/&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 修复 conf/Catalina/localhost 文件内容&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;RUN&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;cd /usr/local/catalina/conf &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;front&amp;#34;&lt;/span&gt; &amp;gt; Catalina/localhost/front.xml&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 指定 Tomcat 的工作目录为 CATALINA_BASE&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;WORKDIR&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; /usr/local/catalina&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 指定环境变量指令&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;ENV&lt;/span&gt; PATH $CATALINA_HOME/bin:$PATH&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#CMD [&amp;#34;catalina-jvm&amp;#34;, &amp;#34;-Xmx512m&amp;#34;, &amp;#34;-Djava.awt.headless=true&amp;#34;, &amp;#34;-Djava.security.egd=/dev/urandom&amp;#34;, &amp;#34;start&amp;#34;]&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CMD&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;catalina-console&amp;#34;&lt;/span&gt;]&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里，我们从 Tomcat 8 镜像开始，并且设置了 &lt;code&gt;CATALINA_BASE&lt;/code&gt; 和 &lt;code&gt;CATALINA_HOME&lt;/code&gt; 环境变量。&lt;/p&gt;&#xA;&lt;p&gt;然后，我们将 WAR 包复制到 webapps 目录，并且修复 conf/Catalina/localhost 文件内容。&lt;/p&gt;</description>
    </item>
    <item>
      <title>First</title>
      <link>https://nexiuss.github.io/posts/first/</link>
      <pubDate>Wed, 11 Sep 2024 11:12:13 +0800</pubDate>
      <guid>https://nexiuss.github.io/posts/first/</guid>
      <description>&lt;h1 id=&#34;hello-world&#34;&gt;Hello World!&lt;/h1&gt;&#xA;&lt;p&gt;This is my blog.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
